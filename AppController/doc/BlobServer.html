<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: BlobServer</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>

</head>
<body class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./lib/blobstore_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/blobstore.rb">lib/blobstore.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-blob_script">::blob_script</a></li>
          
          <li><a href="#method-c-is_running">::is_running</a></li>
          
          <li><a href="#method-c-name">::name</a></li>
          
          <li><a href="#method-c-restart">::restart</a></li>
          
          <li><a href="#method-c-server_ports">::server_ports</a></li>
          
          <li><a href="#method-c-start">::start</a></li>
          
          <li><a href="#method-c-stop">::stop</a></li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./AppControllerClient.html">AppControllerClient</a></li>
        
          <li><a href="./BadConfigurationException.html">BadConfigurationException</a></li>
        
          <li><a href="./BlobServer.html">BlobServer</a></li>
        
          <li><a href="./Collectd.html">Collectd</a></li>
        
          <li><a href="./CronHelper.html">CronHelper</a></li>
        
          <li><a href="./Datastore.html">Datastore</a></li>
        
          <li><a href="./DatastoreFactory.html">DatastoreFactory</a></li>
        
          <li><a href="./DatastoreRepo.html">DatastoreRepo</a></li>
        
          <li><a href="./DatastoreRepoOnAppEngine.html">DatastoreRepoOnAppEngine</a></li>
        
          <li><a href="./DatastoreRepoOnAppScale.html">DatastoreRepoOnAppScale</a></li>
        
          <li><a href="./DatastoreS3.html">DatastoreS3</a></li>
        
          <li><a href="./Djinn.html">Djinn</a></li>
        
          <li><a href="./DjinnJobData.html">DjinnJobData</a></li>
        
          <li><a href="./DjinnServer.html">DjinnServer</a></li>
        
          <li><a href="./Ejabberd.html">Ejabberd</a></li>
        
          <li><a href="./EngineFactory.html">EngineFactory</a></li>
        
          <li><a href="./FailedZooKeeperOperationException.html">FailedZooKeeperOperationException</a></li>
        
          <li><a href="./GodInterface.html">GodInterface</a></li>
        
          <li><a href="./GoogleAppEnginePullQueue.html">GoogleAppEnginePullQueue</a></li>
        
          <li><a href="./GoogleAppEnginePushQueue.html">GoogleAppEnginePushQueue</a></li>
        
          <li><a href="./HAProxy.html">HAProxy</a></li>
        
          <li><a href="./HelperFunctions.html">HelperFunctions</a></li>
        
          <li><a href="./JSONClient.html">JSONClient</a></li>
        
          <li><a href="./LoadBalancer.html">LoadBalancer</a></li>
        
          <li><a href="./Monitoring.html">Monitoring</a></li>
        
          <li><a href="./NeptuneJobData.html">NeptuneJobData</a></li>
        
          <li><a href="./Nginx.html">Nginx</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./PbServer.html">PbServer</a></li>
        
          <li><a href="./QueueFactory.html">QueueFactory</a></li>
        
          <li><a href="./RabbitMQ.html">RabbitMQ</a></li>
        
          <li><a href="./Repo.html">Repo</a></li>
        
          <li><a href="./TaskEngine.html">TaskEngine</a></li>
        
          <li><a href="./TaskEngineAppScale.html">TaskEngineAppScale</a></li>
        
          <li><a href="./TaskEngineGoogleAppEngine.html">TaskEngineGoogleAppEngine</a></li>
        
          <li><a href="./TaskQueue.html">TaskQueue</a></li>
        
          <li><a href="./TaskQueueAzureQueue.html">TaskQueueAzureQueue</a></li>
        
          <li><a href="./TaskQueueGoogleAppEngine.html">TaskQueueGoogleAppEngine</a></li>
        
          <li><a href="./TaskQueueRabbitMQ.html">TaskQueueRabbitMQ</a></li>
        
          <li><a href="./TaskQueueSQS.html">TaskQueueSQS</a></li>
        
          <li><a href="./UserAppClient.html">UserAppClient</a></li>
        
          <li><a href="./ZKInterface.html">ZKInterface</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">BlobServer</h1>

    <div id="description">
      
<p>To support the Google App Engine Blobstore API, we have a custom server
that handles Blobstore API requests, known as the Blobstore Server. This
module abstracts away interactions with our Blobstore Server, providing
methods to  start, stop, and monitor the Blobstore Server as needed.</p>

    </div>

    <!-- Constants -->
    
    <div id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt><a name="SERVER_PORTS">SERVER_PORTS</a></dt>
        
        <dd class="description"></dd>
        
      
      </dl>
    </div>
    

    <!-- Attributes -->
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="blob_script-method" class="method-detail ">
        <a name="method-c-blob_script"></a>

        
        <div class="method-heading">
          <span class="method-name">blob_script</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="blob_script-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 58</span>
def self.blob_script
  return &quot;#{APPSCALE_HOME}/AppDB/blobstore/blobstore_server.py&quot;
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="is_running-method" class="method-detail ">
        <a name="method-c-is_running"></a>

        
        <div class="method-heading">
          <span class="method-name">is_running</span><span
            class="method-args">(my_ip)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="is_running-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 51</span>
def self.is_running(my_ip)
  ports = self.server_ports
  ports.each { |blobserver_port|
   `curl http://#{my_ip}:#{blobserver_port}/` 
  }
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="name-method" class="method-detail ">
        <a name="method-c-name"></a>

        
        <div class="method-heading">
          <span class="method-name">name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="name-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 42</span>
def self.name
  <span class="ruby-string">&quot;as_blobserver&quot;</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="restart-method" class="method-detail ">
        <a name="method-c-restart"></a>

        
        <div class="method-heading">
          <span class="method-name">restart</span><span
            class="method-args">(my_ip, db_port)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="restart-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 37</span>
def self.restart(my_ip, db_port)
  self.stop
  self.start(my_ip, db_port)
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="server_ports-method" class="method-detail ">
        <a name="method-c-server_ports"></a>

        
        <div class="method-heading">
          <span class="method-name">server_ports</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="server_ports-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 47</span>
def self.server_ports
    return <span class="ruby-constant">SERVER_PORTS</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="start-method" class="method-detail ">
        <a name="method-c-start"></a>

        
        <div class="method-heading">
          <span class="method-name">start</span><span
            class="method-args">(db_local_ip, db_local_port, public_ip)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="start-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 17</span>
def self.start(db_local_ip, db_local_port, public_ip)
  blobserver = self.blob_script
  ports = self.server_ports
  ports.each { |blobserver_port|
    start_cmd = [&quot;/usr/bin/python2.6 #{blobserver}&quot;,
          &quot;-d #{db_local_ip}:#{db_local_port}&quot;,
          &quot;-p #{blobserver_port}&quot;,
          &quot;-u #{public_ip}&quot;,
          &quot;-r #{db_local_ip}&quot;].join(<span class="ruby-string">' '</span>)

    stop_cmd = <span class="ruby-string">&quot;pkill -9 blobstore_server&quot;</span>

    <span class="ruby-constant">GodInterface</span>.start(:blobstore, start_cmd, stop_cmd, blobserver_port)
  }
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="stop-method" class="method-detail ">
        <a name="method-c-stop"></a>

        
        <div class="method-heading">
          <span class="method-name">stop</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="stop-source">
<pre>
<span class="ruby-comment"># File lib/blobstore.rb, line 33</span>
def self.stop
   <span class="ruby-constant">GodInterface</span>.stop(:blobstore)
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
    </div>
  

  </div>

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

