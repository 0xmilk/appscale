<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: LoadBalancer</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>

</head>
<body class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./lib/load_balancer_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/load_balancer.rb">lib/load_balancer.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">

      <!-- Parent Class -->
      

      <!-- Namespace Contents -->
      

      <!-- Method Quickref -->
      
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-listen_port">::listen_port</a></li>
          
          <li><a href="#method-c-listen_ssl_port">::listen_ssl_port</a></li>
          
          <li><a href="#method-c-name">::name</a></li>
          
          <li><a href="#method-c-proxy_port">::proxy_port</a></li>
          
          <li><a href="#method-c-public_directory">::public_directory</a></li>
          
          <li><a href="#method-c-restart">::restart</a></li>
          
          <li><a href="#method-c-server_ports">::server_ports</a></li>
          
          <li><a href="#method-c-start">::start</a></li>
          
          <li><a href="#method-c-stop">::stop</a></li>
          
        </ul>
      </div>
      

      <!-- Included Modules -->
      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./AppControllerClient.html">AppControllerClient</a></li>
        
          <li><a href="./BadConfigurationException.html">BadConfigurationException</a></li>
        
          <li><a href="./BlobServer.html">BlobServer</a></li>
        
          <li><a href="./Collectd.html">Collectd</a></li>
        
          <li><a href="./CronHelper.html">CronHelper</a></li>
        
          <li><a href="./Datastore.html">Datastore</a></li>
        
          <li><a href="./DatastoreFactory.html">DatastoreFactory</a></li>
        
          <li><a href="./DatastoreRepo.html">DatastoreRepo</a></li>
        
          <li><a href="./DatastoreRepoOnAppEngine.html">DatastoreRepoOnAppEngine</a></li>
        
          <li><a href="./DatastoreRepoOnAppScale.html">DatastoreRepoOnAppScale</a></li>
        
          <li><a href="./DatastoreS3.html">DatastoreS3</a></li>
        
          <li><a href="./Djinn.html">Djinn</a></li>
        
          <li><a href="./DjinnJobData.html">DjinnJobData</a></li>
        
          <li><a href="./DjinnServer.html">DjinnServer</a></li>
        
          <li><a href="./Ejabberd.html">Ejabberd</a></li>
        
          <li><a href="./EngineFactory.html">EngineFactory</a></li>
        
          <li><a href="./FailedZooKeeperOperationException.html">FailedZooKeeperOperationException</a></li>
        
          <li><a href="./GodInterface.html">GodInterface</a></li>
        
          <li><a href="./GoogleAppEnginePullQueue.html">GoogleAppEnginePullQueue</a></li>
        
          <li><a href="./GoogleAppEnginePushQueue.html">GoogleAppEnginePushQueue</a></li>
        
          <li><a href="./HAProxy.html">HAProxy</a></li>
        
          <li><a href="./HelperFunctions.html">HelperFunctions</a></li>
        
          <li><a href="./JSONClient.html">JSONClient</a></li>
        
          <li><a href="./LoadBalancer.html">LoadBalancer</a></li>
        
          <li><a href="./Monitoring.html">Monitoring</a></li>
        
          <li><a href="./NeptuneJobData.html">NeptuneJobData</a></li>
        
          <li><a href="./Nginx.html">Nginx</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./PbServer.html">PbServer</a></li>
        
          <li><a href="./QueueFactory.html">QueueFactory</a></li>
        
          <li><a href="./RabbitMQ.html">RabbitMQ</a></li>
        
          <li><a href="./Repo.html">Repo</a></li>
        
          <li><a href="./TaskEngine.html">TaskEngine</a></li>
        
          <li><a href="./TaskEngineAppScale.html">TaskEngineAppScale</a></li>
        
          <li><a href="./TaskEngineGoogleAppEngine.html">TaskEngineGoogleAppEngine</a></li>
        
          <li><a href="./TaskQueue.html">TaskQueue</a></li>
        
          <li><a href="./TaskQueueAzureQueue.html">TaskQueueAzureQueue</a></li>
        
          <li><a href="./TaskQueueGoogleAppEngine.html">TaskQueueGoogleAppEngine</a></li>
        
          <li><a href="./TaskQueueRabbitMQ.html">TaskQueueRabbitMQ</a></li>
        
          <li><a href="./TaskQueueSQS.html">TaskQueueSQS</a></li>
        
          <li><a href="./UserAppClient.html">UserAppClient</a></li>
        
          <li><a href="./ZKInterface.html">ZKInterface</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">LoadBalancer</h1>

    <div id="description">
      
<p>As we canâ€™t rely on DNS in AppScale, we have a Rails app, called the
AppLoadBalancer, that provides a single place to route users to their
applications. It also provides authentication for users as an
implementation of the Google App Engine Users API. This module provides
methods that abstract away its configuration and deployment.</p>

    </div>

    <!-- Constants -->
    
    <div id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt><a name="SERVER_PORTS">SERVER_PORTS</a></dt>
        
        <dd class="description"></dd>
        
      
        <dt><a name="PROXY_PORT">PROXY_PORT</a></dt>
        
        <dd class="description"><p>The port which nginx will use to send requests to haproxy</p></dd>
        
      
        <dt><a name="LISTEN_PORT">LISTEN_PORT</a></dt>
        
        <dd class="description"><p>The port which requests to this app will be served from</p></dd>
        
      
        <dt><a name="LISTEN_SSL_PORT">LISTEN_SSL_PORT</a></dt>
        
        <dd class="description"></dd>
        
      
        <dt><a name="RAILS_ROOT">RAILS_ROOT</a></dt>
        
        <dd class="description"></dd>
        
      
      </dl>
    </div>
    

    <!-- Attributes -->
    

    <!-- Methods -->
    
    <div id="public-class-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="listen_port-method" class="method-detail ">
        <a name="method-c-listen_port"></a>

        
        <div class="method-heading">
          <span class="method-name">listen_port</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="listen_port-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 61</span>
def self.listen_port
  <span class="ruby-constant">LISTEN_PORT</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="listen_ssl_port-method" class="method-detail ">
        <a name="method-c-listen_ssl_port"></a>

        
        <div class="method-heading">
          <span class="method-name">listen_ssl_port</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="listen_ssl_port-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 65</span>
def self.listen_ssl_port
  <span class="ruby-constant">LISTEN_SSL_PORT</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="name-method" class="method-detail ">
        <a name="method-c-name"></a>

        
        <div class="method-heading">
          <span class="method-name">name</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="name-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 53</span>
def self.name
  <span class="ruby-string">&quot;as_alb&quot;</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="proxy_port-method" class="method-detail ">
        <a name="method-c-proxy_port"></a>

        
        <div class="method-heading">
          <span class="method-name">proxy_port</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="proxy_port-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 73</span>
def self.proxy_port
  <span class="ruby-constant">PROXY_PORT</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="public_directory-method" class="method-detail ">
        <a name="method-c-public_directory"></a>

        
        <div class="method-heading">
          <span class="method-name">public_directory</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="public_directory-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 57</span>
def self.public_directory
  <span class="ruby-string">&quot;/root/appscale/AppLoadBalancer/public&quot;</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="restart-method" class="method-detail ">
        <a name="method-c-restart"></a>

        
        <div class="method-heading">
          <span class="method-name">restart</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="restart-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 48</span>
def self.restart
  self.stop
  self.start
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="server_ports-method" class="method-detail ">
        <a name="method-c-server_ports"></a>

        
        <div class="method-heading">
          <span class="method-name">server_ports</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="server_ports-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 69</span>
def self.server_ports
  <span class="ruby-constant">SERVER_PORTS</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="start-method" class="method-detail ">
        <a name="method-c-start"></a>

        
        <div class="method-heading">
          <span class="method-name">start</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="start-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 29</span>
def self.start
  env_vars = { <span class="ruby-string">&quot;RAILS_ENV&quot;</span> =&gt; <span class="ruby-string">&quot;production&quot;</span>, <span class="ruby-string">&quot;APPSCALE_HOME&quot;</span> =&gt; <span class="ruby-constant">APPSCALE_HOME</span> }

  <span class="ruby-constant">SERVER_PORTS</span>.each { |port|
    start_cmd = &quot;/usr/bin/mongrel_rails start -c #{RAILS_ROOT} -e production -p #{port} &quot; +
      &quot;-P #{RAILS_ROOT}/log/mongrel.#{port}.pid&quot;
    stop_cmd = &quot;/usr/bin/mongrel_rails stop -P #{RAILS_ROOT}/log/mongrel.#{port}.pid&quot;

    <span class="ruby-constant">GodInterface</span>.start(:loadbalancer, start_cmd, stop_cmd, port, env_vars)
  }

  <span class="ruby-comment">#`service appscale-loadbalancer start`</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="stop-method" class="method-detail ">
        <a name="method-c-stop"></a>

        
        <div class="method-heading">
          <span class="method-name">stop</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code"
            id="stop-source">
<pre>
<span class="ruby-comment"># File lib/load_balancer.rb, line 43</span>
def self.stop
  <span class="ruby-constant">GodInterface</span>.stop(:loadbalancer)
  <span class="ruby-comment">#`service appscale-loadbalancer stop`</span>
end</pre>
          </div>
          
        </div>

        

        
      </div>

    
    </div>
  

  </div>

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

